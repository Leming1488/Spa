{"version":3,"sources":["webpack:///webpack/bootstrap 2cc5e9d321cbd0efecf4","webpack:///./js/spa.js","webpack:///./js/spa.shell.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2cc5e9d321cbd0efecf4\n **/","'use strict';\n\nimport spaShell  from './spa.shell';\n\n\nlet spa = (function() {\n  let initModule = function( container ) {\n    spaShell.initModule( container);\n  };\n  return { initModule : initModule };\n}());\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  let container = document.querySelector('.main-spa');\n  spa.initModule(container);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/spa.js\n **/","'use strict';\n\nlet spaShell = (function() {\n  const CONFIG_MAP = {\n    main_html: `<div class=\"spa-shell-head\">\n      <div class=\"spa-shell-head-logo\"></div>\n      <div class=\"spa-shell-head-acct\"></div>\n      <div class=\"spa-shell-head-search\"></div>\n    </div>\n    <div class=\"spa-shell-main\">\n      <div class=\"spa-shell-main-nav\"></div>\n      <div class=\"spa-shell-main-content\"></div>\n    </div>\n    <div class=\"spa-shell-foot\"></div>\n    <div class=\"spa-shell-chat\"></div>\n    <div class=\"spa-shell-modal\"></div>`,\n    chat_extend_time: 250,\n    chat_retract_time: 300,\n    chat_extend_height: 450,\n    chat_retract_height: 15,\n    chat_extend_title: 'Щелкните, чтобы свернуть',\n    chat_retract_title: 'Щелкните, чтобы раскрыть',\n    anchor_schema_map: {\n      chat: {\n        open: true,\n        closed: true\n      }\n    }\n  };\n\n  let state_map = {\n    container: null,\n    is_chat_retracted: true,\n    anchor_map: {}\n  };\n\n  let  element_map = {};\n\n  let refresh_element_map = function () {\n    let container = state_map.container;\n\n    element_map = {\n      container: container,\n      chat: container.querySelector('.spa-shell-chat')\n    };\n  };\n\n\n  let do_animate = function(options) {\n    let start = performance.now();\n    requestAnimationFrame(function do_animate(time) {\n      let timeFraction = (time - start) / options.duration;\n      if (timeFraction > 1) timeFraction = 1;\n      let progress = options.timing(timeFraction)\n      options.draw(progress);\n      if (timeFraction < 1) {\n        requestAnimationFrame(do_animate);\n      }\n    });\n  }\n\n  let toggleChat = (do_extend, callback) => {\n\n    let px_chat_ht = element_map.chat.clientHeight;\n    let is_open = px_chat_ht === CONFIG_MAP.chat_extend_height;\n    let is_closed = px_chat_ht === CONFIG_MAP.chat_retract_height;\n    let is_sliding = !is_open && !is_closed;\n\n    if (is_sliding) return false;\n\n    if (do_extend) {\n\n      do_animate({\n        duration: CONFIG_MAP.chat_extend_time,\n        timing: function(timeFraction) {\n          return timeFraction;\n        },\n        draw: function(progress) {\n          element_map.chat.style.height = progress * CONFIG_MAP.chat_extend_height + 'px';\n        }\n      });\n      element_map.chat.title = `${CONFIG_MAP.chat_extend_title}`;\n      state_map.is_chat_retracted = false;\n      return true;\n    };\n\n    do_animate({\n      duration: CONFIG_MAP.chat_retract_time,\n      timing: function(timeFraction) {\n        return timeFraction;\n      },\n      draw: function(progress) {\n        element_map.chat.style.height = progress * CONFIG_MAP.chat_retract_height + 'px';\n      }\n    });\n    element_map.chat.title = `${CONFIG_MAP.chat_retract_title}`;\n    state_map.is_chat_retracted = true;\n    return true;\n  };\n\n  let _onClickChat = event => {\n    if (toggleChat(state_map.is_chat_retracted)) {\n      history.replaceState(`chat: ${state_map.is_chat_retracted ? 'closed' : 'open'}`, document.title, window.location.pathname);\n    };\n  };\n\n  let initModule = function(container) {\n    state_map.container = container;\n    state_map.container.insertAdjacentHTML('beforeEnd', CONFIG_MAP.main_html);\n    refresh_element_map();\n    state_map.is_chat_retracted = true;\n    element_map.chat.title = `${CONFIG_MAP.chat_retract_title}`;\n    element_map.chat.addEventListener('click', _onClickChat);\n    window.addEventListener('popstate', event => {\n      state_map.anchor_map = event.state;\n    });\n  };\n\n  return {initModule : initModule};\n\n}())\n\nexport default spaShell;\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/spa.shell.js\n **/"],"sourceRoot":""}